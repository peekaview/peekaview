logging:
  logs:
    default:
      level: INFO

storage:
  module: file_system
  root: /data

apps:
  tls:
    certificates:
      automate:
        - api.peekaview.de
        - v1.peekaview.de
        - t1.peekaview.de

  layer4:
    servers:
      main:
        listen: [":443"]
        routes:
          # TURN-Server
          - match:
              - tls:
                  sni:
                    - "t1.peekaview.de"
            handle:
              - handler: tls
              - handler: proxy
                upstreams:
                  - dial: ["127.0.0.1:5349"]

          # LiveKit-WebSocket (Backend)
          - match:
              - tls:
                  sni:
                    - "v1.peekaview.de"
            handle:
              - handler: tls
                connection_policies:
                  - alpn: ["http/1.1", "h2"]
              - handler: proxy
                upstreams:
                  - dial: ["127.0.0.1:7880"]

          # MeetDev-WebApp (PHP)
          - match:
              - tls:
                  sni:
                    - "api.peekaview.de"
            handle:
              - handler: tls
                connection_policies:
                  - alpn: ["http/1.1", "h2"]
              - handler: proxy
                upstreams:
                  - dial: ["127.0.0.1:8080"]
