<!DOCTYPE html>
<html lang="">

<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />

  <style>



    @font-face {
        font-family: 'Abel';
        font-style: normal;
        font-weight: 400;
        src: local('Abel Regular'), local('Abel-Regular'), url('fonts/abel-v10-latin-regular.woff2') format('woff2');
  }
  </style>

  <link rel="stylesheet" href="css/spectre.min.css" />
  <link rel="stylesheet" href="css/loading.css" />
  <link rel="stylesheet" href="css/overlay.css" />

    <style>

html, body {
  overflow: hidden;
  margin: 0;
  padding: 0;
}

    body {
      font-family: Abel;
    }

    .modal-container {
      -webkit-user-select: none;
    }

    .modal-container .modal-body {
      padding: 0px;
      padding-top: 4px;
    }

    .modalin {
      animation-name: scale-in;
      animation-duration: 0.3s;
    }

    .modalout {
      animation-name: scale-out;
      animation-duration: 0.2s;
      transform: translateY(-100%);
    }

    .checkboxcontainer .checkmark:after {
      left: 5px;
      right: 3px;
      top: 2px;
    }

    @keyframes scale-in {
      0% {
        transform: translateY(-100%);

      }

      100% {
        transform: translateY(0%);
      }
    }

    @keyframes scale-out {
      0% {
        transform: translateY(0%);
      }

      100% {
        transform: translateY(-100%);
      }
    }
  </style>

  <title>peekaview - Dialog</title>
</head>

<body style="background: transparent;">
  <div id="modal-id" class="modal active modalin">
    <div style="height: 15px; width: 100%; position: absolute; top: 0; left: 0; -webkit-app-region: drag;"></div>
    <div class="modal-container settings_container" >
      <div class="modal-body">
        <div class="btn btn-sm mr-1 btn-secondary" style="line-height: 20px; float:left; width: 110px; margin:0px; padding: 4px; margin-bottom: 4px;">
          <label class="checkboxcontainer">&nbsp;&nbsp;Fernzugriff
            <input type="checkbox" onChange="toggleRemoteControl()" id="remotecontrolenabled"><span
              class="checkmark"></span>
          </label>
        </div>
        <div class="btn btn-sm mr-1 btn-secondary" style="line-height: 20px; float:left; width: 110px; margin:0px; padding: 4px;">
          <label class="checkboxcontainer">&nbsp;&nbsp;Mauszeiger
            <input type="checkbox" onChange="toggleMouse()" id="mouseenabled" checked="checked"><span
              class="checkmark"></span>
          </label>
        </div>
        <div class="btn btn-sm mr-1 btn-secondary" style="line-height: 20px; float:left; width: 110px; margin:0px; padding: 4px;"
          onClick="shareDifferentScreen()">
          <label>Bildschirm ausw√§hlen</label>
        </div>
        <div class="btn btn-sm mr-1 btn-secondary" style="line-height: 20px; float:left; width: calc(10%); margin:0px; padding: 4px;"
          onClick="copyLink()">
          <svg width="16px" height="16px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path fill="#666" d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/>
          </svg>
        </div>
        <div class="btn btn-sm mr-1 btn-secondary" style="line-height: 20px; float:left; width: calc(10%); margin:0px; padding: 4px;"
          onClick="togglePause()">
          <!-- Pause SVG -->
          <svg id="pauseIcon" width="16px" height="16px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path fill="#666" d="M6 4h4v16H6zm8 0h4v16h-4z"/>
          </svg>
          <!-- Play SVG (hidden by default) -->
          <svg id="playIcon" width="16px" height="16px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" style="display: none;">
            <path fill="#666" d="M8 5v14l11-7z"/>
          </svg>
        </div>
        <div class="btn btn-sm mr-1 btn-secondary" style="line-height: 20px; float:left; width: calc(10%); margin:0px; padding: 4px;"
          onClick="stopSharing()">
          <svg width="16px" height="16px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path fill="#666" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
          </svg>
        </div>
        
        <div style="line-height: 20px; float:right; padding-bottom: 6px; padding-top: 6px; width: 16px; -webkit-user-select: none; -webkit-app-region: drag; display: flex; justify-content: center; align-items: center;">
          <svg width="16px" height="16px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path fill="none" stroke="#ccc" stroke-width="2"
              d="M15,5 L17,5 L17,3 L15,3 L15,5 Z M7,5 L9,5 L9,3 L7,3 L7,5 Z M15,13 L17,13 L17,11 L15,11 L15,13 Z M7,13 L9,13 L9,11 L7,11 L7,13 Z M15,21 L17,21 L17,19 L15,19 L15,21 Z M7,21 L9,21 L9,19 L7,19 L7,21 Z" />
          </svg>
        </div>
      </div>
    </div>
  </div>
</body>
<script>
  const electron = require('electron')

   var params = [];
    let i = 0;
    if (window.process) {
    window.process.argv.forEach(function (param) {
      if (i > 0 && param.substring(0, 1) != '-' && param.substring(0, 1) != '/') {
        params.push(param);
      }
      i++;
    });
    //params.shift();
    console.log(params);
    console.log(window.process.argv);
    //alert(params[0]);
  }

  function stopSharing() {
    //removePeer(socket.id);
    electron.ipcRenderer.invoke("stop-sharing");
  }

  let previousMouseState = false;

  function toggleRemoteControl() {
    if (document.querySelector('#remotecontrolenabled').checked) {
      previousMouseState = document.querySelector('#mouseenabled').checked;
      document.querySelector('#mouseenabled').disabled = true;
      document.querySelector('#mouseenabled').checked = true;
      electron.ipcRenderer.invoke("enable-remote-control");
      electron.ipcRenderer.invoke("enable-mouse");
    } else {
      document.querySelector('#mouseenabled').disabled = false;
      document.querySelector('#mouseenabled').checked = previousMouseState;
      electron.ipcRenderer.invoke("disable-remote-control");
      if (!previousMouseState) {
        electron.ipcRenderer.invoke("disable-mouse");
      }
    }
  }

  function toggleMouse() {
    if (document.querySelector('#mouseenabled').checked) {
      electron.ipcRenderer.invoke("enable-mouse");
    } else {
      electron.ipcRenderer.invoke("disable-mouse");
    }
  }

  function shareDifferentScreen() {
    electron.ipcRenderer.invoke("open-screen-source-selection");
  }

  function copyLink() {
    electron.ipcRenderer.invoke("show-sharing-active");
  }

  let isPaused = false;

  function togglePause() {
    isPaused = !isPaused;
    const pauseIcon = document.getElementById('pauseIcon');
    const playIcon = document.getElementById('playIcon');
    
    if (isPaused) {
      pauseIcon.style.display = 'none';
      playIcon.style.display = 'inline';
      electron.ipcRenderer.invoke("pause-sharing");
    } else {
      pauseIcon.style.display = 'inline';
      playIcon.style.display = 'none';
      electron.ipcRenderer.invoke("resume-sharing");
    }
  }

</script>

</html>