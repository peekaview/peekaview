<html>
<head>
    <script src="assets/js/simplepeer.min.js"></script>
    <script src="assets/js/socket.io.min.js"></script>
    <link rel="stylesheet" href="assets/css/overlay.css" />
    <style>
        body {
            border: 1px solid red;
            margin: 0px;
            overflow: hidden;
            padding: 0px;
            height: 230px;
            width: 300px;
            background: white;
            text-align: center;
        }
    </style>
</head>

<body>
    <div style="border-bottom: 1px solid red; height: 30px">
        <div class="button" style="line-height: 20px; float:left; width: calc(33% - 16px); margin:0px; padding: 4px;">
            <label class="checkboxcontainer">Fernzugriff
                <input type="checkbox" onChange="toggleRemoteControl()" id="remotecontrolenabled"><span
                    class="checkmark"></span>
            </label>
        </div>
        <div class="button" style="line-height: 20px; float:left; width: calc(33% - 16px); margin:0px; padding: 4px;">
            <label class="checkboxcontainer">Mauszeiger
                <input type="checkbox" onChange="toggleMouse()" id="mouseenabled" checked="checked"><span
                    class="checkmark"></span>
            </label>
        </div>
        <div class="button" style="line-height: 20px; float:left; width: calc(33% - 17px); margin:0px; padding: 4px;"
            onClick="stopJitsiSharing()">Beenden</div>
        <div class="button"
            style="line-height: 20px; float:left; padding-bottom: 6px; padding-top: 6px; width:20px; -webkit-user-select: none; -webkit-app-region: drag;">
            <svg width="16px" height="16px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path fill="none" stroke="#fff" stroke-width="2"
                    d="M15,5 L17,5 L17,3 L15,3 L15,5 Z M7,5 L9,5 L9,3 L7,3 L7,5 Z M15,13 L17,13 L17,11 L15,11 L15,13 Z M7,13 L9,13 L9,11 L7,11 L7,13 Z M15,21 L17,21 L17,19 L15,19 L15,21 Z M7,21 L9,21 L9,19 L7,19 L7,21 Z" />
            </svg>
        </div>
    </div>
    <div style="height: 200px; width: 300px">
        <video id="localVideo" class="vid"
            style="-webkit-user-select: none; height: 200px; width: 300px; -webkit-app-region: drag; object-fit: cover;"
            autoplay muted></video>
    </div>
</body>


<script>
    const electron = require('electron')
    var socket = null;
    var localVideo = null;
    var roomid = null;
    var peers = {}

    //https://github.com/Dirvann/webrtc-video-conference-simple-peer/blob/master/src/socketController.js
    //https://ps-meetdev.meetzi.de/remoteviewer/?user=J%C3%BCrgen&userid=J%C3%BCrgen&color=green&room=18ee6cd55e185f64854df6a4b3e96b9f0001


    var configuration = null;


    function handleStream(stream, sourceid, hostname, roomid) {
        localVideo = document.querySelector('#localVideo');
        localVideo.srcObject = stream;

        //socket = io('wss://ps-' + hostname + '/');

        // roomid = roomid;
        //socket.emit("join-message", roomid);
    }


    function stopJitsiSharing() {
        //removePeer(socket.id);
        electron.ipcRenderer.invoke("stopJitsiSharing");
    }

    function toggleRemoteControl() {
        if (document.querySelector('#remotecontrolenabled').checked == true && document.querySelector('#mouseenabled').checked == false) {
            document.querySelector('#mouseenabled').checked = true;
        }
        electron.ipcRenderer.invoke("toggleRemoteControl");
    }

    function toggleMouse() {
        electron.ipcRenderer.invoke("toggleMouse");
    }

</script>
</html>